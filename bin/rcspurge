#!/bin/csh
# purge old rcs revisions.

if ($#argv != 1 || $1 == "-help") then
    echo "Usage: $0:t <tag>"
    echo "Purpose: from . down, delete all but the newest rev, and tag it."
    exit 1
endif

set tag = $1

foreach f (`find . \( -name '*,v' -o -name '.*,v' \) -print`)
    rlog $f | awk '/^revision/ {if (++n == 2) {system ("rcs -q -o:" $2 " '$f'"); exit;}} END {system ("rcs -q -N'$tag':" " '$f'");}'
end

# For RCS Only -- Do Not Edit
# @(#) $RCSfile: rcspurge,v $ $Date: 2003/04/15 20:47:55 $ $Revision: 1.1.1.1 $ $Name:  $
